---
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const allActividadesModules = import.meta.glob('../../content/actividades/*.md');
  const allActividades = await Promise.all(
    Object.values(allActividadesModules).map(async (module) => await module())
  );

  return allActividades.map((actividad) => {
    const slug = actividad.url.split('/').pop()?.replace('.md', '');
    return {
      params: { slug: slug },
      props: { actividad },
    };
  });
}

const { slug } = Astro.params;
const { actividad } = Astro.props;
const { Content } = await actividad.render();
---

<Layout title={actividad.frontmatter.title}>
    <main class="container mx-auto px-4 py-8">
        <article class="bg-neutral-light p-8 rounded-lg shadow-md">
            <h1 class="text-4xl font-bold text-primary-blue mb-4">{actividad.frontmatter.title}</h1>
            <p class="text-neutral-dark text-sm mb-6">
                Fecha: {new Date(actividad.frontmatter.date).toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' })}
            </p>
            {actividad.frontmatter.image && (
                <img src={actividad.frontmatter.image} alt={actividad.frontmatter.title} class="w-full h-80 object-cover mb-6 rounded-lg"/>
            )}
            <div class="prose prose-lg max-w-none text-neutral-dark">
                <Content />
            </div>
            <a href="/actividades" class="text-primary-blue hover:underline mt-8 inline-block">&larr; Volver a Actividades</a>
        </article>
    </main>
</Layout>
